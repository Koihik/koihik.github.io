"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[739],{237:(t,e,o)=>{o.d(e,{default:()=>l});var a=o(2691),r=o(4732),n=o.n(r);let l=(0,a.A)({colorSchemes:{dark:!0},cssVariables:{colorSchemeSelector:"class"},palette:{mode:"dark"},typography:{fontFamily:n().style.fontFamily},components:{MuiCssBaseline:{styleOverrides:{"acronym.talent-variable":{textDecoration:"underline",textDecorationStyle:"dotted",textDecorationColor:"rgba(25, 118, 210, 0.7)",cursor:"help",position:"relative","&:hover::after":{content:"attr(title)",position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",padding:"10px 15px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",borderRadius:"4px",fontSize:"0.75rem",whiteSpace:"pre-wrap",zIndex:1500,minWidth:"250px",maxWidth:"350px",width:"max-content",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)",marginBottom:"5px",textAlign:"center",lineHeight:"1.4"},"&:hover::before":{content:'""',position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",borderWidth:"5px",borderStyle:"solid",borderColor:"transparent transparent rgba(0, 0, 0, 0.8) transparent",marginBottom:"0px",zIndex:1500}},"acronym.stat-variable":{textDecoration:"underline",textDecorationStyle:"dotted",textDecorationColor:"rgba(156, 39, 176, 0.7)",cursor:"help",position:"relative","&:hover::after":{content:"attr(title)",position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",padding:"10px 15px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",borderRadius:"4px",fontSize:"0.75rem",whiteSpace:"pre-wrap",zIndex:1500,minWidth:"250px",maxWidth:"350px",width:"max-content",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)",marginBottom:"5px",textAlign:"center",lineHeight:"1.4"},"&:hover::before":{content:'""',position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",borderWidth:"5px",borderStyle:"solid",borderColor:"transparent transparent rgba(0, 0, 0, 0.8) transparent",marginBottom:"0px",zIndex:1500}},"acronym.variable":{textDecoration:"underline",textDecorationStyle:"dotted",textDecorationColor:"rgba(76, 175, 80, 0.7)",cursor:"help",position:"relative","&:hover::after":{content:"attr(title)",position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",padding:"10px 15px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",borderRadius:"4px",fontSize:"0.75rem",whiteSpace:"pre-wrap",zIndex:1500,minWidth:"250px",maxWidth:"350px",width:"max-content",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)",marginBottom:"5px",textAlign:"center",lineHeight:"1.4"},"&:hover::before":{content:'""',position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",borderWidth:"5px",borderStyle:"solid",borderColor:"transparent transparent rgba(0, 0, 0, 0.8) transparent",marginBottom:"0px",zIndex:1500}}}},MuiAlert:{styleOverrides:{root:{variants:[{props:{severity:"info"},style:{backgroundColor:"#60a5fa"}}]}}}}})},795:(t,e,o)=>{o.d(e,{DataProvider:()=>l,E:()=>s});var a=o(5155),r=o(2115);let n=(0,r.createContext)(void 0);function l(t){let{children:e}=t,[o,l]=(0,r.useState)({}),[s,i]=(0,r.useState)({}),[c,d]=(0,r.useState)({}),[p,h]=(0,r.useState)([]),[f,u]=(0,r.useState)([]),[m,g]=(0,r.useState)([]),[x,b]=(0,r.useState)(null),[y,_]=(0,r.useState)(!0),[w,S]=(0,r.useState)(0),[v,k]=(0,r.useState)(null),[C,j]=(0,r.useState)({});(0,r.useEffect)(()=>{(async()=>{try{_(!0),k(null),S(5);let t=await fetch("/data/master/tome.json"),e=await t.json();b(e),S(10);let o=await fetch("/data/master/classes.json"),a=await o.json();l(a.classes||{}),i(a.subclasses||{}),S(15);let r=await fetch("/data/master/races.json"),n=await r.json();d(n.races||{}),S(20);let s=await fetch("/data/master/search.talents-types.json"),c=await s.json();h(c||[]);let p=[...c];p.forEach(t=>{if(t.href){let e=t.href.replace(/^talents\//,"").split("/");e.length>0&&(t.category=e[0])}});let f=e.talent_categories.map(t=>({id:t,name:e.talent_categories_names[t]||t,types:[]}));f.find(t=>"other"===t.id)||f.push({id:"other",name:e.talent_categories_names.other||"其他",types:[]}),f.forEach(t=>{t.types=p.filter(e=>e.category===t.id)});let m=f.find(t=>"other"===t.id);if(m){let t=p.filter(t=>!f.some(e=>e.id===t.category));m.types.push(...t)}let g=f.filter(t=>t.types.length>0);u(g),S(30);let x=new Set;p.forEach(t=>{if(t.href){let e=t.href.replace(/^talents\//,"").split("/");e.length>0&&x.add(e[0])}});let y=Array.from(x),w=[1,1.3,1.5],v=y.length*w.length,C=0,D={};for(let t of y)for(let e of w){try{let o=1===e?"1":e.toString(),a=await fetch("/data/master/talents.".concat(t,"-").concat(o,".json")),r=await a.json();Array.isArray(r)&&r.forEach(t=>{if((null==t?void 0:t.type)&&Array.isArray(t.talents)){let o=t.type.startsWith("talents/")?t.type:"talents/".concat(t.type);console.log("Section type:",t.type),console.log("Constructed talentType:",o);let a=t.talents.map(t=>({id:t.id,name:t.name,short_name:t.short_name,description:t.info_text||"",image:t.image||"",mode:t.mode||"",points:t.points||0,range:t.range||"",type:t.type||[],cost:t.cost||"",cooldown:t.cooldown||"",use_speed:t.use_speed||"",require:t.require||[],no_unlearn_last:t.no_unlearn_last||!1,_dlc:t._dlc||"",_dlc_name:t._dlc_name||"",source_code:t.source_code}));D["".concat(o,"|").concat(e)]=a}})}catch(o){console.error("Error loading talents for ".concat(t," level ").concat(e,":"),o)}C++,S(30+Math.floor(C/v*70))}j(D),S(100),_(!1)}catch(t){console.error("Error loading data:",t),k("Failed to load game data. Please refresh the page."),_(!1)}})()},[]);let D=async(t,e)=>{try{let a=t.startsWith("talents/")?t:"talents/".concat(t);console.log("Original talent type:",t),console.log("Normalized talent type:",a);let r=e||1;if(!e)for(let t of Object.keys(o))for(let e of o[t].subclass_list||[]){let t=s[e];if(t){if(t.talents_types_class&&t.talents_types_class[a]){r=t.talents_types_class[a][1]||1;break}if(t.talents_types_generic&&t.talents_types_generic[a]){r=t.talents_types_generic[a][1]||1;break}}}let n=[1,1.3,1.5].includes(r)?r:1,l="".concat(a,"|").concat(n);if(console.log("Looking for cache key:",l),console.log("Valid level:",n),C[l])return console.log("Found in cache!"),C[l];let i="".concat(t,"|").concat(n);if(C[i])return console.log("Found in cache with original type!"),C[i];let c=a.replace(/^talents\//,""),d="talents/".concat(c,"|").concat(n);if(C[d])return console.log("Found in cache with adjusted prefix!"),C[d];console.warn("Talent data for ".concat(l," not found in preloaded cache")),console.log("Available cache keys:",Object.keys(C));let p=Object.keys(C).filter(e=>e.includes(a)||e.includes(t)||e.includes(c));if(p.length>0)return console.log("Found partial matches:",p),C[p[0]];return[]}catch(e){return console.error("Error getting talents for ".concat(t,":"),e),[]}};return(0,a.jsx)(n.Provider,{value:{classes:o,subclasses:s,races:c,talentTypes:p,talentCategories:f,talentSystems:m,tomeData:x,isLoading:y,loadingProgress:w,error:v,getTalentsForType:D},children:e})}function s(){let t=(0,r.useContext)(n);if(void 0===t)throw Error("useData must be used within a DataProvider");return t}}}]);