(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75],{2603:(e,s,t)=>{"use strict";t.d(s,{A:()=>_});var a=t(5155),n=t(2115),l=t(5970),r=t(357),i=t(9560),c=t(9300),o=t(5416),d=t(63),h=t(1745),p=t(7448),x=t(4782),u=t(4288),m=t(317),y=t(9518),j=t(1008),A=t(4839),g=t(9250),b=t(4193),v=t(2981),f=t(694),k=t(795);function w(){let[e,s]=(0,n.useState)(""),[t,i]=(0,n.useState)([]),[c,o]=(0,n.useState)(!1),w=(0,d.useRouter)(),_=(0,n.useRef)(null),{classes:C,subclasses:E,races:N,talentTypes:O,isLoading:W}=(0,k.E)(),L=Object.keys(C).length>0&&Object.keys(E).length>0&&O.length>0&&Object.keys(N).length>0;return(0,n.useEffect)(()=>{if(!e||!L)return void i([]);let s=[],t=e.toLowerCase(),a=[];Object.entries(C).forEach(e=>{let[s,n]=e;n.display_name.toLowerCase().includes(t)&&a.push(s)}),Object.entries(E).forEach(e=>{let[n,l]=e,r="",i="";for(let[e,s]of Object.entries(C))if(s.subclass_list.includes(n)){r=s.display_name,i=e;break}(l.display_name.toLowerCase().includes(t)||a.includes(i))&&s.push({name:n,displayName:l.display_name,type:"subclass",parentName:r,path:"/viewers/classes",anchor:"subclass-".concat(n)})}),O.forEach(e=>{e.name.toLowerCase().includes(t)&&s.push({name:e.href,displayName:e.name,type:"skill",path:"/viewers/skills",anchor:"skill-".concat(e.href.replace(/\//g,"-"))})}),Object.entries(N).forEach(e=>{let[a,n]=e;n.display_name.toLowerCase().includes(t)&&s.push({name:a,displayName:n.display_name,type:"race",path:"/viewers/races",anchor:"race-".concat(a)})}),i(s)},[e,C,E,O,N,L]),(0,a.jsx)(h.x,{onClickAway:()=>o(!1),children:(0,a.jsxs)(r.A,{ref:_,sx:{position:"relative",width:"100%"},children:[(0,a.jsx)(p.A,{fullWidth:!0,placeholder:"搜索职业、技能或种族...",value:e,onChange:e=>{s(e.target.value),o(!0)},onClick:()=>o(!0),InputProps:{startAdornment:(0,a.jsx)(x.A,{position:"start",children:(0,a.jsx)(v.A,{})}),endAdornment:e&&(0,a.jsx)(x.A,{position:"end",children:(0,a.jsx)(u.A,{size:"small",onClick:()=>{s(""),o(!1)},children:(0,a.jsx)(f.A,{})})})},sx:{bgcolor:"background.paper"}}),c&&e&&(0,a.jsx)(l.A,{elevation:3,sx:{position:"absolute",top:"100%",left:0,right:0,maxHeight:400,overflow:"auto",zIndex:1200,mt:.5},children:W?(0,a.jsx)(r.A,{sx:{p:2,textAlign:"center"},children:(0,a.jsx)(m.A,{children:"加载中..."})}):t.length>0?(0,a.jsx)(y.A,{disablePadding:!0,children:["subclass","skill","race"].map(e=>{let s=t.filter(s=>s.type===e);if(0===s.length)return null;let l={subclass:"职业",skill:"技能",race:"种族"};return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(j.Ay,{sx:{bgcolor:"action.selected",py:.5},children:(0,a.jsxs)(m.A,{variant:"subtitle2",children:[l[e]||e," (",s.length,")"]})}),(0,a.jsx)(A.A,{}),s.map((e,s)=>(0,a.jsxs)(j.Ay,{onClick:()=>{w.push("".concat(e.path)),setTimeout(()=>{if(e.anchor){let s=document.getElementById(e.anchor);s&&(s.scrollIntoView({behavior:"smooth",block:"start"}),"subclass"===e.type&&s.click())}},300),o(!1)},sx:{py:1,cursor:"pointer","&:hover":{bgcolor:"action.hover"}},children:[(0,a.jsx)(g.A,{primary:"subclass"===e.type&&e.parentName?"".concat(e.parentName,"/").concat(e.displayName):e.displayName}),(0,a.jsx)(b.A,{label:l[e.type]||e.type,size:"small",color:"subclass"===e.type?"primary":"skill"===e.type?"secondary":"default",variant:"outlined"})]},"".concat(e.type,"-").concat(e.name)))]},e)})}):e?(0,a.jsx)(r.A,{sx:{p:2,textAlign:"center"},children:(0,a.jsx)(m.A,{children:"未找到匹配结果"})}):null})]})})}function _(){var e;let s=(0,d.usePathname)(),t=(0,d.useRouter)(),n=(e=s||"/viewers/classes").startsWith("/viewers/skills")?"skills":e.startsWith("/viewers/races")?"races":"classes";return(0,a.jsx)(l.A,{elevation:1,sx:{position:"sticky",top:0,zIndex:10,mb:2},children:(0,a.jsx)(r.A,{sx:{px:2,py:1},children:(0,a.jsxs)(i.A,{component:"div",container:!0,spacing:2,alignItems:"center",justifyContent:"space-between",direction:{xs:"column",sm:"row"},children:[(0,a.jsx)(i.A,{component:"div",sx:{gridColumn:{xs:"span 12",sm:"auto"}},children:(0,a.jsxs)(c.A,{value:n,onChange:(e,s)=>{"classes"===s&&t.push("/viewers/classes"),"skills"===s&&t.push("/viewers/skills"),"races"===s&&t.push("/viewers/races")},variant:"standard",sx:{minHeight:"48px"},children:[(0,a.jsx)(o.A,{label:"职业",value:"classes"}),(0,a.jsx)(o.A,{label:"技能",value:"skills"}),(0,a.jsx)(o.A,{label:"种族",value:"races"})]})}),(0,a.jsx)(i.A,{component:"div",sx:{gridColumn:{xs:"span 12",sm:"span 7",md:"span 6",lg:"span 5"}},children:(0,a.jsx)(w,{})})]})})})}},5621:(e,s,t)=>{Promise.resolve().then(t.bind(t,9794))},9794:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(5155),n=t(2115),l=t(6129),r=t(6245),i=t(237),c=t(2603),o=t(357),d=t(5970),h=t(317),p=t(795);function x(){let{races:e}=(0,p.E)(),[s,t]=(0,n.useState)(""),l=e[s];return(0,a.jsxs)(o.A,{sx:{display:"flex",gap:3,flexWrap:"wrap"},children:[(0,a.jsx)(o.A,{sx:{flex:"0 0 300px",minWidth:"300px"},children:(0,a.jsxs)(d.A,{sx:{p:2,height:"80vh",overflow:"auto"},children:[(0,a.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"种族列表"}),Object.entries(e).map(e=>{let[n,l]=e,r=s===n;return(0,a.jsx)(o.A,{id:"race-".concat(n),onClick:()=>t(n),sx:{p:1,mb:.5,borderRadius:1,cursor:"pointer",backgroundColor:r?"primary.light":"transparent",color:r?"primary.contrastText":"text.primary","&:hover":{backgroundColor:r?"primary.light":"action.hover"}},children:(0,a.jsx)(h.A,{variant:"body2",children:l.display_name})},n)})]})}),(0,a.jsx)(o.A,{sx:{flex:"1 1 600px",minWidth:"400px"},children:(0,a.jsxs)(d.A,{sx:{p:2,minHeight:"80vh"},children:[(0,a.jsxs)(h.A,{variant:"h6",gutterBottom:!0,children:["种族介绍",l&&" - ".concat(l.display_name)]}),l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.A,{sx:{display:"flex",justifyContent:"center",gap:2,mb:3},children:[(0,a.jsxs)(o.A,{sx:{textAlign:"center"},children:[(0,a.jsx)("img",{src:"/img/player/".concat(l.short_name.toLowerCase(),"_male.png"),alt:"".concat(l.display_name," - 男性"),style:{maxWidth:"100%",height:"auto"},onError:e=>{e.target.style.display="none"}}),(0,a.jsx)(h.A,{variant:"caption",display:"block",children:"男性"})]}),(0,a.jsxs)(o.A,{sx:{textAlign:"center"},children:[(0,a.jsx)("img",{src:"/img/player/".concat(l.short_name.toLowerCase(),"_female.png"),alt:"".concat(l.display_name," - 女性"),style:{maxWidth:"100%",height:"auto"},onError:e=>{e.target.style.display="none"}}),(0,a.jsx)(h.A,{variant:"caption",display:"block",children:"女性"})]})]}),(0,a.jsx)(h.A,{variant:"body1",color:"text.secondary",dangerouslySetInnerHTML:{__html:l.desc}})]}):(0,a.jsx)(h.A,{color:"text.secondary",sx:{mt:4,textAlign:"center"},children:"请在左侧选择一个种族"})]})})]})}function u(){return(0,a.jsx)(l.default,{theme:i.default,children:(0,a.jsxs)(r.A,{maxWidth:"xl",sx:{py:2},children:[(0,a.jsx)(c.A,{}),(0,a.jsx)(x,{})]})})}}},e=>{e.O(0,[214,456,717,169,739,441,255,358],()=>e(e.s=5621)),_N_E=e.O()}]);