(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25],{2596:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(5155),l=r(2115),n=r(6129),o=r(6245),i=r(237),a=r(2603),c=r(357),d=r(5970),h=r(317),x=r(5e3),p=r(795);function m(){let{talentTypes:e,talentCategories:t,classes:r,subclasses:n,tomeData:o,getTalentsForType:i,isLoading:a}=(0,p.E)(),[m,f]=(0,l.useState)([]),[u,g]=(0,l.useState)([]),[y,b]=(0,l.useState)(""),[j,A]=(0,l.useState)([]),[v,_]=(0,l.useState)(null),[k,C]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{t.length>0&&g(t),e.length>0&&f(e)},[t,e]),(0,l.useEffect)(()=>{(async()=>{if(0!==m.length){C(!0);try{let e=[];for(let t of m)if(t.href)try{let s=await i(t.href,1);if(0===s.length)continue;let l=1,o=t.href;for(let e of Object.keys(r))for(let t of r[e].subclass_list||[]){let e=n[t];if(e){if(e.talents_types_class&&e.talents_types_class[o]){l=e.talents_types_class[o][1]||1;break}if(e.talents_types_generic&&e.talents_types_generic[o]){l=e.talents_types_generic[o][1]||1;break}}}e.push({type:t.href,name:t.name,talents:s,level:l})}catch(e){console.error("Error loading talents for ".concat(t.href,":"),e)}A(e)}catch(e){console.error("Error loading talent systems:",e)}finally{C(!1)}}})()},[m,r,n,i]),(0,l.useEffect)(()=>{if(!y)return;let e=document.getElementById("system-".concat(y.replace(/\//g,"-")));e&&e.scrollIntoView({behavior:"smooth",block:"start"})},[y]),(0,s.jsxs)(c.A,{sx:{display:"flex",gap:3,flexWrap:"wrap"},children:[(0,s.jsx)(c.A,{sx:{flex:"0 0 320px",minWidth:"300px"},children:(0,s.jsxs)(d.A,{sx:{p:2,height:"80vh",overflow:"auto"},children:[(0,s.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"技能大系"}),u.map(e=>(0,s.jsxs)(c.A,{sx:{mb:2},children:[(0,s.jsx)(h.A,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1,pb:.5,borderBottom:"1px solid",borderColor:"divider",color:"text.secondary"},children:e.name}),e.types.map(e=>{let t=y===e.href;return(0,s.jsx)(c.A,{id:"skill-".concat(e.href.replace(/\//g,"-")),onClick:()=>b(e.href),sx:{p:1,mb:.5,ml:1,borderRadius:1,cursor:"pointer",backgroundColor:t?"primary.light":"transparent",color:t?"primary.contrastText":"text.primary","&:hover":{backgroundColor:t?"primary.light":"action.hover"}},children:(0,s.jsx)(h.A,{variant:"body2",children:e.name})},e.href)})]},e.id))]})}),(0,s.jsx)(c.A,{sx:{flex:"1 1 400px",minWidth:"400px"},children:(0,s.jsxs)(d.A,{sx:{p:2,height:"80vh",overflow:"auto"},children:[(0,s.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"技能列表"}),k?(0,s.jsx)(h.A,{color:"text.secondary",sx:{textAlign:"center",mt:4},children:"加载中..."}):j.length>0?(0,s.jsx)(c.A,{children:j.map(e=>(0,s.jsxs)(c.A,{id:"system-".concat(e.type.replace(/\//g,"-")),sx:{mb:4},children:[(0,s.jsxs)(h.A,{variant:"subtitle1",sx:{fontWeight:"bold",mb:2,pb:1,borderBottom:"1px solid",borderColor:"divider",color:y===e.type?"primary.main":"text.primary",backgroundColor:y===e.type?"action.selected":"transparent",px:1,borderRadius:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)("span",{children:e.name}),e.level&&1!==e.level&&(0,s.jsx)("span",{style:{fontSize:"0.8em",color:"text.secondary"},children:e.level})]}),(0,s.jsx)(c.A,{sx:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:1},children:e.talents.map((e,t)=>(0,s.jsxs)(c.A,{onClick:()=>_(e),sx:{p:1,border:"1px solid",borderColor:"divider",borderRadius:1,cursor:"pointer",textAlign:"center",backgroundColor:(null==v?void 0:v.id)===e.id?"action.selected":"transparent","&:hover":{backgroundColor:"action.hover",borderColor:"primary.main"}},children:[(0,s.jsx)(c.A,{sx:{width:48,height:48,backgroundColor:"grey.200",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:1},children:e.image?(0,s.jsx)("img",{src:"/img/talents/48/".concat(e.image),alt:e.name,style:{width:"100%",height:"100%",objectFit:"contain"},onError:e=>{e.target.style.display="none"}}):(0,s.jsx)(h.A,{variant:"h6",children:"?"})}),(0,s.jsx)(h.A,{variant:"caption",display:"block",sx:{fontWeight:"bold"},children:e.name})]},"".concat(e.id,"-").concat(t)))})]},e.type))}):(0,s.jsx)(h.A,{color:"text.secondary",sx:{textAlign:"center",mt:4},children:"暂无技能数据"})]})}),(0,s.jsx)(c.A,{sx:{flex:"0 0 360px",minWidth:"350px"},children:(0,s.jsx)(x.A,{selectedTalent:v,title:"技能详情"})})]})}function f(){return(0,s.jsx)(n.default,{theme:i.default,children:(0,s.jsxs)(o.A,{maxWidth:"xl",sx:{py:2},children:[(0,s.jsx)(a.A,{}),(0,s.jsx)(m,{})]})})}},3195:(e,t,r)=>{Promise.resolve().then(r.bind(r,2596))}},e=>{e.O(0,[214,456,717,169,428,739,574,441,255,358],()=>e(e.s=3195)),_N_E=e.O()}]);