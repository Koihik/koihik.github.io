"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[739],{237:(t,e,a)=>{a.d(e,{default:()=>l});var o=a(2691),r=a(4732),n=a.n(r);let l=(0,o.A)({colorSchemes:{dark:!0},cssVariables:{colorSchemeSelector:"class"},palette:{mode:"dark"},typography:{fontFamily:n().style.fontFamily},components:{MuiCssBaseline:{styleOverrides:{"acronym.talent-variable":{textDecoration:"underline",textDecorationStyle:"dotted",textDecorationColor:"rgba(25, 118, 210, 0.7)",cursor:"help",position:"relative","&:hover::after":{content:"attr(title)",position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",padding:"10px 15px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",borderRadius:"4px",fontSize:"0.75rem",whiteSpace:"pre-wrap",zIndex:1500,minWidth:"250px",maxWidth:"350px",width:"max-content",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)",marginBottom:"5px",textAlign:"center",lineHeight:"1.4"},"&:hover::before":{content:'""',position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",borderWidth:"5px",borderStyle:"solid",borderColor:"transparent transparent rgba(0, 0, 0, 0.8) transparent",marginBottom:"0px",zIndex:1500}},"acronym.stat-variable":{textDecoration:"underline",textDecorationStyle:"dotted",textDecorationColor:"rgba(156, 39, 176, 0.7)",cursor:"help",position:"relative","&:hover::after":{content:"attr(title)",position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",padding:"10px 15px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",borderRadius:"4px",fontSize:"0.75rem",whiteSpace:"pre-wrap",zIndex:1500,minWidth:"250px",maxWidth:"350px",width:"max-content",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)",marginBottom:"5px",textAlign:"center",lineHeight:"1.4"},"&:hover::before":{content:'""',position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",borderWidth:"5px",borderStyle:"solid",borderColor:"transparent transparent rgba(0, 0, 0, 0.8) transparent",marginBottom:"0px",zIndex:1500}},"acronym.variable":{textDecoration:"underline",textDecorationStyle:"dotted",textDecorationColor:"rgba(76, 175, 80, 0.7)",cursor:"help",position:"relative","&:hover::after":{content:"attr(title)",position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",padding:"10px 15px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",borderRadius:"4px",fontSize:"0.75rem",whiteSpace:"pre-wrap",zIndex:1500,minWidth:"250px",maxWidth:"350px",width:"max-content",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)",marginBottom:"5px",textAlign:"center",lineHeight:"1.4"},"&:hover::before":{content:'""',position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",borderWidth:"5px",borderStyle:"solid",borderColor:"transparent transparent rgba(0, 0, 0, 0.8) transparent",marginBottom:"0px",zIndex:1500}}}},MuiAlert:{styleOverrides:{root:{variants:[{props:{severity:"info"},style:{backgroundColor:"#60a5fa"}}]}}}}})},795:(t,e,a)=>{a.d(e,{DataProvider:()=>l,E:()=>s});var o=a(5155),r=a(2115);let n=(0,r.createContext)(void 0);function l(t){let{children:e}=t,[a,l]=(0,r.useState)({}),[s,i]=(0,r.useState)({}),[c,d]=(0,r.useState)({}),[p,h]=(0,r.useState)({}),[u,f]=(0,r.useState)([]),[m,g]=(0,r.useState)([]),[y,b]=(0,r.useState)([]),[x,_]=(0,r.useState)(null),[w,S]=(0,r.useState)(!0),[v,k]=(0,r.useState)(0),[j,C]=(0,r.useState)(null),[E,A]=(0,r.useState)({});(0,r.useEffect)(()=>{(async()=>{try{S(!0),C(null),k(5);let t=await fetch("/data/master/tome.json"),e=await t.json();_(e),k(10);let a=await fetch("/data/master/classes.json"),o=await a.json();l(o.classes||{}),i(o.subclasses||{}),k(15);let r=await fetch("/data/master/races.json"),n=await r.json();d(n.races||{}),h(n.subraces||{}),k(20);let s=await fetch("/data/master/search.talents-types.json"),c=await s.json();f(c||[]);let p=[...c];p.forEach(t=>{if(t.href){let e=t.href.replace(/^talents\//,"").split("/");e.length>0&&(t.category=e[0])}});let u=e.talent_categories.map(t=>({id:t,name:e.talent_categories_names[t]||t,types:[]}));u.find(t=>"other"===t.id)||u.push({id:"other",name:e.talent_categories_names.other||"其他",types:[]}),u.forEach(t=>{t.types=p.filter(e=>e.category===t.id)});let m=u.find(t=>"other"===t.id);if(m){let t=p.filter(t=>!u.some(e=>e.id===t.category));m.types.push(...t)}let y=u.filter(t=>t.types.length>0);g(y),k(30);let b=new Set;p.forEach(t=>{if(t.href){let e=t.href.replace(/^talents\//,"").split("/");e.length>0&&b.add(e[0])}});let x=Array.from(b),w=[1,1.3,1.5],v=x.length*w.length,j=0,E={},D=[],W=[];for(let t of x)for(let e of w){let a=1===e?"1":e.toString(),o=(async()=>{try{let o=await fetch("/data/master/talents.".concat(t,"-").concat(a,".json")),r=await o.json(),n=[];return Array.isArray(r)&&r.forEach(t=>{if((null==t?void 0:t.type)&&Array.isArray(t.talents)){let a=t.type.startsWith("talents/")?t.type:"talents/".concat(t.type),o=t.talents.map(t=>({id:t.id,name:t.name,short_name:t.short_name,description:t.info_text||"",image:t.image||"",mode:t.mode||"",points:t.points||0,range:t.range||"",type:t.type||[],cost:t.cost||"",cooldown:t.cooldown||"",use_speed:t.use_speed||"",require:t.require||[],no_unlearn_last:t.no_unlearn_last||!1,_dlc:t._dlc||"",_dlc_name:t._dlc_name||"",source_code:t.source_code}));n.push({talentType:a,level:e,talents:o})}}),n}catch(a){return console.error("Error loading talents for ".concat(t," level ").concat(e,":"),a),null}finally{W.push(()=>{j++,k(30+Math.floor(j/v*70))})}})();D.push(o)}(await Promise.all(D)).forEach(t=>{Array.isArray(t)&&t.forEach(t=>{t&&t.talentType&&t.talents&&(E["".concat(t.talentType,"|").concat(t.level)]=t.talents)})}),W.forEach(t=>t()),A(E),k(100),S(!1)}catch(t){console.error("Error loading data:",t),C("Failed to load game data. Please refresh the page."),S(!1)}})()},[]);let D=async(t,e)=>{try{let o=t.startsWith("talents/")?t:"talents/".concat(t);console.log("Original talent type:",t),console.log("Normalized talent type:",o);let r=e||1;if(!e)for(let t of Object.keys(a))for(let e of a[t].subclass_list||[]){let t=s[e];if(t){if(t.talents_types_class&&t.talents_types_class[o]){r=t.talents_types_class[o][1]||1;break}if(t.talents_types_generic&&t.talents_types_generic[o]){r=t.talents_types_generic[o][1]||1;break}}}let n=[1,1.3,1.5].includes(r)?r:1,l="".concat(o,"|").concat(n);if(console.log("Looking for cache key:",l),console.log("Valid level:",n),E[l])return console.log("Found in cache!"),E[l];let i="".concat(t,"|").concat(n);if(E[i])return console.log("Found in cache with original type!"),E[i];let c=o.replace(/^talents\//,""),d="talents/".concat(c,"|").concat(n);if(E[d])return console.log("Found in cache with adjusted prefix!"),E[d];console.warn("Talent data for ".concat(l," not found in preloaded cache")),console.log("Available cache keys:",Object.keys(E));let p=Object.keys(E).filter(e=>e.includes(o)||e.includes(t)||e.includes(c));if(p.length>0)return console.log("Found partial matches:",p),E[p[0]];return[]}catch(e){return console.error("Error getting talents for ".concat(t,":"),e),[]}};return(0,o.jsx)(n.Provider,{value:{classes:a,subclasses:s,races:c,subraces:p,talentTypes:u,talentCategories:m,talentSystems:y,tomeData:x,isLoading:w,loadingProgress:v,error:j,getTalentsForType:D},children:e})}function s(){let t=(0,r.useContext)(n);if(void 0===t)throw Error("useData must be used within a DataProvider");return t}}}]);